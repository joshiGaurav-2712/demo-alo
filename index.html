<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>ALO Sunset Sneaker - Black | ALO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Swiper.js CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

  <style>
    @import url("https://fonts.googleapis.com/css?family=Inter:300,400,500,700,600");
  </style>
  <style>
    @import url("https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css");

    * {
      -webkit-font-smoothing: antialiased;
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0px;
      height: 100%;
    }

    /* a blue color as a generic focus style */
    button:focus-visible {
      outline: 2px solid #4a90e2 !important;
      outline: -webkit-focus-ring-color auto 5px !important;
    }

    a {
      text-decoration: none;
    }
  </style>
</head>

<body>
  <div id="app"></div>
  <script type="module" src="./src/index.jsx"></script>

  <!-- Swiper.js Script -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    // Initialize Swiper with multiple attempts
    let swiperInitialized = false;
    let troopodSwiperInitialized = false;

    function initSwiper() {
      if (swiperInitialized) return;

      const swiperElement = document.querySelector('.testimonials-swiper');
      if (swiperElement && window.Swiper) {
        try {
          const testimonialsSwiper = new Swiper('.testimonials-swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            centeredSlides: true,
            navigation: {
              nextEl: '.testimonials-swiper .swiper-button-next',
              prevEl: '.testimonials-swiper .swiper-button-prev',
            },
            breakpoints: {
              480: {
                slidesPerView: 1.2,
                spaceBetween: 24,
                centeredSlides: false,
              },
              640: {
                slidesPerView: 1.8,
                spaceBetween: 28,
                centeredSlides: false,
              }
            },
            loop: true,
            autoplay: {
              delay: 5000,
              disableOnInteraction: false,
            },
            speed: 600,
            watchSlidesProgress: true,
            watchSlidesVisibility: true,
            on: {
              init: function () {
                console.log('Testimonials Swiper initialized successfully');
                swiperInitialized = true;
              },
              slideChange: function () {
                console.log('Testimonials slide changed to:', this.activeIndex);
              }
            }
          });

        } catch (error) {
          console.error('Testimonials Swiper initialization error:', error);
        }
      } else {
        console.log('Testimonials swiper element or library not ready, retrying...');
        setTimeout(initSwiper, 500);
      }
    }

    function initTroopodSwiper() {
      if (troopodSwiperInitialized) return;

      const troopodElement = document.querySelector('.troopod-swiper');
      if (troopodElement && window.Swiper) {
        try {
          const troopodSwiper = new Swiper('.troopod-swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            centeredSlides: true,
            navigation: {
              nextEl: '.troopod-swiper .swiper-button-next',
              prevEl: '.troopod-swiper .swiper-button-prev',
            },
            breakpoints: {
              480: {
                slidesPerView: 1.2,
                spaceBetween: 24,
                centeredSlides: false,
              },
              640: {
                slidesPerView: 1.8,
                spaceBetween: 28,
                centeredSlides: false,
              }
            },
            loop: false, // Disable loop so it stops at last slide
            allowSlideNext: true,
            allowSlidePrev: true,
            speed: 600,
            watchSlidesProgress: true,
            watchSlidesVisibility: true,
            on: {
              init: function () {
                console.log('Troopod Swiper initialized successfully');
                troopodSwiperInitialized = true;
              },
              slideChange: function () {
                console.log('Troopod slide changed to:', this.activeIndex);
                // Stop at the 3rd video (index 2)
                if (this.activeIndex >= 2) {
                  this.allowSlideNext = false;
                } else {
                  this.allowSlideNext = true;
                }
              },
              reachEnd: function () {
                console.log('Reached the last video');
                this.allowSlideNext = false;
              }
            }
          });

        } catch (error) {
          console.error('Troopod Swiper initialization error:', error);
        }
      } else {
        console.log('Troopod swiper element or library not ready, retrying...');
        setTimeout(initTroopodSwiper, 500);
      }
    }

    // Try multiple initialization methods for both swipers
    document.addEventListener('DOMContentLoaded', function () {
      initSwiper();
      initTroopodSwiper();
    });
    window.addEventListener('load', function () {
      initSwiper();
      initTroopodSwiper();
    });
    setTimeout(function () {
      initSwiper();
      initTroopodSwiper();
    }, 1000);
    setTimeout(function () {
      initSwiper();
      initTroopodSwiper();
    }, 2000);
  </script>
</body>

</html>
